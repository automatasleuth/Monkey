# ZenCrawl: System Architecture & User Flow

## ðŸ§­ End-to-End Workflow (Frontend â†’ Backend)

### 1. ðŸ§‘â€ðŸ’» User Interaction (Frontend UI)
Users interact with the ZenCrawl dashboard to access the 4 core tools:

- **Scrape Tab**: Input URL â†’ click â€œScrapeâ€
- **Map Tab**: Input domain â†’ click â€œMap Siteâ€
- **Crawl Tab**: Input root URL + settings â†’ click â€œCrawl Siteâ€
- **Search Tab**: Input query â†’ click â€œSearch and Extractâ€

Each form sends a request to the backend API.

> **Tech**: `Next.js`, `TailwindCSS` or `ShadCN`, deployed on Vercel

---

### 2. ðŸ›°ï¸ Frontend â†’ Backend API

Each user action hits a specific REST endpoint:

| Tool     | Endpoint         | Method | Payload Example                  |
|----------|------------------|--------|----------------------------------|
| Scrape   | `/api/scrape`    | POST   | `{ "url": "...", "options": {} }` |
| Map      | `/api/map`       | POST   | `{ "rootUrl": "...", "subdomains": true }` |
| Crawl    | `/api/crawl`     | POST   | `{ "rootUrl": "...", "depth": 3, "filters": {} }` |
| Search   | `/api/search`    | POST   | `{ "query": "AI tools", "country": "us" }` |

> **Tech**: Node.js / Express or FastAPI

---

### 3. ðŸ”§ Backend Logic (Scraping Engine)

Jobs are delegated to specialized workers:

#### âœ… ScrapeWorker
- Scrapes a single page using Playwright or Firecrawl SDK
- Extracts clean Markdown, HTML, JSON

#### âœ… MapWorker
- Visits homepage
- Extracts and deduplicates all internal links

#### âœ… CrawlWorker
- Recursively crawls all subpages up to max depth
- Applies rate limits, path filters

#### âœ… SearchWorker
- Queries search engine (via API or SERP proxy)
- Optionally scrapes content from resulting pages

> **Tech**: Firecrawl, Playwright, Puppeteer  
> **Queue**: BullMQ (Node.js) or Celery (Python)

---

### 4. ðŸ§  (Optional) AI Middleware

Inject AI post-processing where needed:

- Summarize or chunk scraped content
- Classify type of page (blog, product, legal, etc.)
- Extract entities, metadata, keywords
- Format for vector DBs (e.g., embeddings)

> **Tech**: OpenAI, Claude, Mistral, LangChain

---

### 5. ðŸ“¦ Return Processed Data to Frontend

- Store in Supabase or S3-compatible storage
- Return link or preview to user
- Display Markdown, JSON, screenshots inline

---

## ðŸ“Š Architecture Diagram (Text Representation)

```
[ User ]
   â”‚
   â–¼
[ Web UI - Next.js ]
   â”‚
   â”œâ”€â”€ POST /api/scrape   â”€â”€â–¶ [ ScrapeWorker ]
   â”œâ”€â”€ POST /api/map      â”€â”€â–¶ [ MapWorker ]
   â”œâ”€â”€ POST /api/crawl    â”€â”€â–¶ [ CrawlWorker ]
   â”œâ”€â”€ POST /api/search   â”€
